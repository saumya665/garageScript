<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title></title>
  </head>
  <body>
    Name:   <input type = 'text' id = 'a1'/>
    Comment: <input type = 'text' id = 'a2'/>
    <input type = 'submit' id = 'b1'/>
    <div>
      <pre id = 'm1'/>
 </div> 
 <script>
const button = document.getElementById('b1');
button.onclick=()=>{
  console.log("it runs");
  const name = document.getElementById('a1').value;
  const comment = document.getElementById('a2').value;
  const xhttp = new XMLHttpRequest();
  xhttp.open('GET', `/XMLHttpRequest?a1=${name}&a2=${comment}`);
  xhttp.send();
}
const getChatFile =()=>{
  const xhttp = new XMLHttpRequest();
  xhttp.open('GET', '/textOut.txt');
  xhttp.onreadystatechange=()=>{
    if(xhttp.responseText){
      const content = document.getElementById('m1');
      content.innerHTML = xhttp.responseText;
    }
  };
  xhttp.send();
}

window.setInterval(getChatFile, 1000);
 </script>
  </body>
</html>
